
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Profile</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="css/profile.css">
  <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
</head>

<body>

  <div class="profile-container">

    <!-- ‚úÖ USER INFO ROW (Updated Layout) -->
    <div class="user-row">

      <!-- ‚úÖ PROFILE IMAGE WITH CAMERA & DEFAULT ICON -->
      <div class="profile-pic-wrapper">
        <i class="bx bxs-user default-user-icon"></i>
        <label class="camera-icon">
          <i class="bx bx-camera camera-icon"></i>
          <input type="file" hidden>
        </label>
      </div>

      <!-- ‚úÖ USERNAME + NAME + SETTINGS ICON -->
      <div class="user-right">

        <div class="user-top-row">
          <div class="user-text">
            <h2 class="username">username_here</h2>
            <span class="full-name">Full Name</span>
          </div>

        </div>

        <!-- ‚úÖ COUNTS ROW (UNCHANGED) -->
        <div class="counts">
          <div>
            <b>12</b>
            <span>Posts</span>
          </div>
          <div>
            <b>150</b>
            <span>Followers</span>
          </div>
          <div>
            <b>200</b>
            <span>Following</span>
          </div>
        </div>

        <!-- ‚úÖ BIO SECTION -->
        <div class="bio">
          <p class="bio-text">
            ‚ú® This is my bio. Passionate about coding & design.<br>
            üìç Earth
          </p>
        </div>


      </div>
    </div>

    <!-- ‚úÖ EDIT BUTTON ROW (UNCHANGED) -->
    <div class="edit-btn-container">
      <a href="edit_profile.html">
        <button class="edit-btn">Edit Profile</button>
      </a>
    </div>

    <!-- ‚úÖ TABS -->
    <div class="tabs">
      <div class="tab active" data-tab="posts">
        <i class="bx bx-grid-alt"></i>
        <span>Posts</span>
      </div>

      <div class="tab" data-tab="reels">
        <i class="bx bx-play-circle"></i>
        <span>Reels</span>
      </div>

      <div class="tab" data-tab="saved">
        <i class="bx bx-bookmark"></i>
        <span>Saved</span>
      </div>


    </div>


    <!-- ‚úÖ POSTS TAB CONTENT (IMPORTANT FIX ‚úÖ) -->
    <div class="tab-content active" id="posts">

      <div class="getting-started">
        <h3 class="gs-title">Getting Started</h3>

        <div class="gs-cards">
          <div class="gs-card">
            <div class="gs-icon">
              <i class="bx bx-camera"></i>
            </div>

            <h4>Share Photos</h4>
            <p>When you share photos, they'll appear on your profile.</p>

            <button class="gs-btn" id="openCreatePost">
              Share your first photo
            </button>
          </div>
        </div>
      </div>

    </div>


    <!-- ‚úÖ REELS TAB CONTENT -->
    <div class="tab-content" id="reels">
      <h3 class="gs-title">Reels</h3>
      <p>This is your Reels section.</p>
    </div>


    <!-- ‚úÖ SAVED TAB CONTENT -->
    <div class="tab-content" id="saved">
      <h3 class="gs-title">Saved</h3>
      <p>This is your Saved posts section.</p>
    </div>




    <div class="posts-grid">
      <div class="post-item">
        <img src="https://picsum.photos/600/600?random=1" alt="Post 1">
      </div>
      <div class="post-item">
        <img src="https://picsum.photos/600/600?random=2" alt="Post 2">
      </div>
      <div class="post-item">
        <img src="https://picsum.photos/600/600?random=3" alt="Post 3">
      </div>
      <div class="post-item">
        <img src="https://picsum.photos/600/600?random=4" alt="Post 4">
      </div>
      <div class="post-item">
        <img src="https://picsum.photos/600/600?random=5" alt="Post 5">
      </div>


    </div>








    <!--popuo------------------------------------------>
    <!-- ‚úÖ CREATE POST MODAL -->
    <div class="create-post-overlay" id="createPostModal">

      <div class="create-post-box">

        <!-- HEADER -->
        <div class="create-post-header">
          <span>Create new post</span>
          <i class="bx bx-x" id="closePostModal"></i>
        </div>

        <!-- BODY -->
        <div class="create-post-body">
          <i class="bx bx-images post-big-icon"></i>
          <p>Drag photos and videos here</p>

          <button class="select-btn" id="selectFromComputer">
            Select from computer
          </button>

          <input type="file" id="postFileInput" hidden accept="image/*,video/*">
        </div>

      </div>
    </div>


    <!-------------------------------------------------------------secomd popup-->

    <!-- ‚úÖ CROP MODAL -->
    <div class="crop-overlay" id="cropModal">

      <div class="crop-box">
        <i class="bx bx-x close-crop" id="closeCrop"></i>

        <!-- ‚úÖ HEADER -->
        <div class="crop-header">
          <i class="bx bx-arrow-back crop-back" id="backToUpload"></i>

          <button class="next-btn">Next</button>

        </div>

        <!-- ‚úÖ IMAGE PREVIEW -->
        <div class="crop-preview">
          <img id="cropImage" src="">
        </div>



      </div>
    </div>

    <!--3rd popup------------------------------------------------------->
    <!-- ‚úÖ DISCARD CONFIRM MODAL -->
    <div class="discard-overlay" id="discardModal">

      <div class="discard-box">
        <h3>Discard post?</h3>
        <p>If you leave, your edits won't be saved.</p>

        <div class="discard-actions">
          <button class="discard-btn" id="confirmDiscard">Discard</button>
          <button class="cancel-btn" id="cancelDiscard">Cancel</button>
        </div>
      </div>

    </div>



    <!-- ‚úÖ VIEW / EDIT POST MODAL -->
    <div class="post-view-overlay" id="postViewModal">

      <div class="post-view-box">

        <!-- LEFT: IMAGE + COMMENT BUTTON -->
        <div class="post-view-image">

          <img id="viewPostImage" src="">

          <!-- ‚úÖ ADD COMMENT BUTTON (LEFT SIDE) -->
          <button class="img-comment-btn">
            <i class="bx bx-message-rounded"></i>
            Comment
          </button>

        </div>

        <!-- RIGHT: DETAILS -->
        <div class="post-view-details">

          <!-- HEADER -->
          <div class="post-view-header">
            <div class="pv-user">
              <img src="https://picsum.photos/40/40" alt="Profile" class="pv-user-img">
              <span>username_here</span>
            </div>
            <i class="bx bx-dots-horizontal-rounded" id="openPostOptions"></i>
          </div>

          <!-- CAPTION -->
          <div class="post-caption">
            <b>username_here</b>
            <span>This is a sample caption for the post.</span>
          </div>

          <!-- COMMENTS -->
          <div class="post-comments">
            <div class="comment"><b>user1</b> Nice post!</div>
            <div class="comment"><b>user2</b> üî•üî•</div>
          </div>

          <!-- ACTIONS -->
          <div class="post-actions">
            <i class="bx bx-heart"></i>
            <i class="bx bx-message-rounded"></i>
            <i class="bx bx-bookmark"></i>
          </div>

          <!-- ‚úÖ COMMENT FORM -->
          <form class="add-comment" method="POST">
            <input type="text" name="comment" placeholder="Add a comment..." required>
            <button type="submit">Post</button>
          </form>

        </div>



      </div>

    </div>


    <!-- ‚úÖ POST OPTIONS POPUP -->
<div class="post-options-popup" id="postOptionsPopup">

  <a href="#" class="post-option danger">
    Delete
  </a>

  <a href="#" class="post-option">
    Edit
  </a>

  <a href="#" class="post-option cancel">
    Cancel
  </a>

</div>






</body>

<script>

  const hasPosts = false; // change to true when backend sends posts

  if (hasPosts) {
    document.getElementById("emptyState").style.display = "none";
  }

  document.querySelector(".gs-btn").onclick = () => {
    alert("Open upload modal here");
  };



  /*------------first popup-------------------------------------- */

  const openBtn = document.getElementById("openCreatePost");
  const modal = document.getElementById("createPostModal");
  const closeBtn = document.getElementById("closePostModal");
  const selectBtn = document.getElementById("selectFromComputer");
  const fileInput = document.getElementById("postFileInput");

  const cropModal = document.getElementById("cropModal");
  const cropImage = document.getElementById("cropImage");
  const backBtn = document.getElementById("backToUpload");
  const closeCrop = document.getElementById("closeCrop");

  const discardModal = document.getElementById("discardModal");
  const confirmDiscard = document.getElementById("confirmDiscard");
  const cancelDiscard = document.getElementById("cancelDiscard");

  /* ‚úÖ OPEN FIRST POPUP */
  openBtn.onclick = () => {
    modal.style.display = "flex";
  };

  /* ‚úÖ CLOSE FIRST POPUP */
  closeBtn.onclick = () => {
    modal.style.display = "none";
  };

  /* ‚úÖ OPEN FILE PICKER */
  selectBtn.onclick = () => {
    fileInput.click();
  };

  /* ‚úÖ AFTER FILE SELECT ‚Üí OPEN CROP POPUP */
  fileInput.onchange = () => {
    const file = fileInput.files[0];

    if (file) {
      const reader = new FileReader();
      reader.onload = () => {
        cropImage.src = reader.result;
        modal.style.display = "none";
        cropModal.style.display = "flex";
      };
      reader.readAsDataURL(file);
    }
  };

  /* ‚úÖ BACK BUTTON FROM CROP */
  backBtn.onclick = () => {
    cropModal.style.display = "none";
    modal.style.display = "flex";
  };

  /* ‚úÖ X BUTTON ‚Üí OPEN DISCARD POPUP */
  closeCrop.onclick = () => {
    discardModal.style.display = "flex";
  };

  /* ‚úÖ CANCEL DISCARD */
  cancelDiscard.onclick = () => {
    discardModal.style.display = "none";
  };

  /* ‚úÖ CONFIRM DISCARD */
  confirmDiscard.onclick = () => {
    discardModal.style.display = "none";
    cropModal.style.display = "none";
    modal.style.display = "none";
    fileInput.value = ""; // clear file input
  };


  /*--------------------------------------------------------*/

  const tabs = document.querySelectorAll(".tab");
  const contents = document.querySelectorAll(".tab-content");

  tabs.forEach(tab => {
    tab.addEventListener("click", () => {

      // ‚úÖ Remove active from all tabs
      tabs.forEach(t => t.classList.remove("active"));

      // ‚úÖ Hide all tab contents (INCLUDING POSTS)
      contents.forEach(c => c.classList.remove("active"));

      // ‚úÖ Activate clicked tab
      tab.classList.add("active");

      const target = tab.getAttribute("data-tab");
      const activeContent = document.getElementById(target);

      if (activeContent) {
        activeContent.classList.add("active");
      }

    });
  });


  /* cmt popip*/

  const postModal = document.getElementById("postViewModal");
  const viewImage = document.getElementById("viewPostImage");
  const closePostView = document.getElementById("closePostView");

  document.querySelectorAll(".post-item img").forEach(img => {
    img.addEventListener("click", () => {
      viewImage.src = img.src;
      postModal.style.display = "flex";
    });
  });

  closePostView.onclick = () => {
    postModal.style.display = "none";
  };





/*-------------posts edits-------------------*/



  const openOptions = document.getElementById("openPostOptions");
  const optionsPopup = document.getElementById("postOptionsPopup");

  openOptions.onclick = (e) => {
    e.stopPropagation();
    optionsPopup.style.display =
      optionsPopup.style.display === "flex" ? "none" : "flex";
  };

  // Close when clicking outside
  document.addEventListener("click", () => {
    optionsPopup.style.display = "none";
  });
</script>
</html>
